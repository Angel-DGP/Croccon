<!DOCTYPE html>
<html lang="es">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Tienda - Croccon Academia de Rob√≥tica</title>
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600;800&display=swap" rel="stylesheet" />
    <link rel="stylesheet" href="assets/css/styles.css" />
  </head>
  <body>
    <header class="topbar">
      <div class="container nav">
        <a class="brand" href="index.html">Croccon</a>
        <button class="hamburger" id="navToggle" aria-label="Abrir men√∫">‚ò∞</button>
        <nav id="mainNav">
          <a href="index.html">Inicio</a>
          <a href="tienda.html" class="active">Tienda</a>
          <a href="galeria.html">Galer√≠a</a>
          <a href="contacto.html">Contacto</a>
          <a href="login.html" class="btn btn-sm">Ingresar</a>
        </nav>
      </div>
    </header>

    <main>
      <section class="page-header">
        <div class="container">
          <h1>Cat√°logo de Kits</h1>
          <p>Explora nuestros kits de rob√≥tica y descubre qu√© contiene cada uno</p>
        </div>
      </section>

      <section class="tienda-content" style="padding-bottom:120px">
        <div class="container">
          <div class="filters">
            <button class="filter-btn active" data-filter="all">Todos</button>
            <button class="filter-btn" data-filter="principiante">Principiante</button>
            <button class="filter-btn" data-filter="intermedio">Intermedio</button>
            <button class="filter-btn" data-filter="avanzado">Avanzado</button>
          </div>
          
          <div class="products-grid" id="productsGrid">
            <!-- Los productos se cargar√°n din√°micamente -->
          </div>
        </div>
      </section>
    </main>

    <footer class="footer">
      <div class="container foot-grid">
        <div>
          <strong>Croccon</strong>
          <p>Buy One. Plant one.</p>
        </div>
        <div class="right">
          <span>S√≠guenos</span>
          <div class="dots"></div>
        </div>
      </div>
    </footer>

    <script src="assets/js/data.js"></script>
    <script src="assets/js/app.js"></script>
    <script>
      // L√≥gica espec√≠fica de la tienda
      document.addEventListener('DOMContentLoaded', function() {
        // Hidrataci√≥n defensiva de datos para despliegues est√°ticos (ej. Netlify)
        try {
          var stored = localStorage.getItem('crocconData');
          if (!window.CROC_DATA && stored) {
            window.CROC_DATA = JSON.parse(stored);
          }
        } catch (e) { /* noop */ }
        if (!window.CROC_DATA) {
          window.CROC_DATA = { products: [] };
        }

        const productsGrid = document.getElementById('productsGrid');
        const filterBtns = document.querySelectorAll('.filter-btn');
        
        function renderProducts(products) {
          productsGrid.innerHTML = products.map(product => `
            <div class="product-card" data-category="${product.category || 'principiante'}">
              <img src="${product.img}" alt="${product.name}">
              <div class="product-info">
                <h3>${product.name}</h3>
                <p class="product-desc">${product.description || 'Kit completo con materiales y gu√≠a digital'}</p>
                <div class="kit-level">
                  <span class="level-badge ${product.category || 'principiante'}">${(product.category || 'principiante').charAt(0).toUpperCase() + (product.category || 'principiante').slice(1)}</span>
                </div>
                <div class="kit-features">
                  <h4>Contenido del Kit:</h4>
                  <ul>
                    <li>üì¶ Materiales f√≠sicos</li>
                    <li>üìñ Gu√≠a paso a paso</li>
                    <li>üé• Videos tutoriales</li>
                    <li>üíª C√≥digo de ejemplo</li>
                    <li>üîß Herramientas incluidas</li>
                  </ul>
                </div>
                <div class="product-actions">
                  <button class="btn" onclick="viewProduct('${product.id}')">Ver Contenido</button>
                  <button class="btn btn-outline" onclick="getPassword('${product.id}')">Obtener Contrase√±a</button>
                </div>
              </div>
            </div>
          `).join('');
        }
        
        function filterProducts(category) {
          const products = window.CROC_DATA.products;
          const filtered = category === 'all' ? products : products.filter(p => (p.category || 'principiante') === category);
          renderProducts(filtered);
        }
        
        // Filtros
        filterBtns.forEach(btn => {
          btn.addEventListener('click', () => {
            filterBtns.forEach(b => b.classList.remove('active'));
            btn.classList.add('active');
            filterProducts(btn.dataset.filter);
          });
        });
        
        // Cargar productos iniciales
        renderProducts(window.CROC_DATA.products || []);
      });
      
      function viewProduct(productId) {
        window.location.href = `kit.html?id=${productId}`;
      }
      
      function getPassword(productId) {
        const product = window.CROC_DATA.products.find(p => p.id === productId);
        if (product) {
          // Mostrar modal con informaci√≥n para obtener la contrase√±a
          const modal = document.createElement('div');
          modal.className = 'modal-backdrop show';
          modal.innerHTML = `
            <div class="modal">
              <header>
                <h3>Obtener Contrase√±a - ${product.name}</h3>
                <button class="close-btn" onclick="this.closest('.modal-backdrop').remove()">√ó</button>
              </header>
              <div class="modal-body">
                <div class="password-info">
                  <div class="password-header">
                    <div class="password-icon">üîê</div>
                    <h4>Para obtener la contrase√±a de este kit:</h4>
                  </div>
                  <div class="password-steps">
                    <div class="step">
                      <div class="step-number">1</div>
                      <div class="step-content">
                        <strong>Adquiere el kit f√≠sicamente</strong>
                        <p>Visita nuestra academia y compra el kit en persona</p>
                      </div>
                    </div>
                    <div class="step">
                      <div class="step-number">2</div>
                      <div class="step-content">
                        <strong>Presenta tu comprobante</strong>
                        <p>Muestra el recibo de compra a un instructor</p>
                      </div>
                    </div>
                    <div class="step">
                      <div class="step-number">3</div>
                      <div class="step-content">
                        <strong>Recibe la contrase√±a</strong>
                        <p>Un instructor te proporcionar√° el c√≥digo de acceso</p>
                      </div>
                    </div>
                    <div class="step">
                      <div class="step-number">4</div>
                      <div class="step-content">
                        <strong>Accede al contenido</strong>
                        <p>Disfruta de videos, gu√≠as y material exclusivo</p>
                      </div>
                    </div>
                  </div>
                  <div class="contact-info">
                    <div class="help-icon">üí°</div>
                    <div class="help-content">
                      <strong>¬øNecesitas ayuda?</strong>
                      <p>Contacta a un instructor o visita la academia para m√°s informaci√≥n sobre la adquisici√≥n de kits.</p>
                    </div>
                  </div>
                </div>
              </div>
              <div class="modal-actions">
                <button class="btn btn-primary" onclick="this.closest('.modal-backdrop').remove()">Entendido</button>
              </div>
            </div>
          `;
          document.body.appendChild(modal);
        }
      }
    </script>
  </body>
</html>
