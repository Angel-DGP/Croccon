<!DOCTYPE html>
<html lang="es">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Tienda - Croccon Academia de Robótica</title>
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600;800&display=swap" rel="stylesheet" />
    <link rel="stylesheet" href="assets/css/styles.css" />
  </head>
  <body>
    <header class="topbar">
      <div class="container nav">
        <a class="brand" href="index.html">Croccon</a>
        <button class="hamburger" id="navToggle" aria-label="Abrir menú">☰</button>
        <nav id="mainNav">
          <a href="index.html">Inicio</a>
          <a href="tienda.html" class="active">Tienda</a>
          <a href="galeria.html">Galería</a>
          <a href="contacto.html">Contacto</a>
          <a href="login.html" class="btn btn-sm">Ingresar</a>
        </nav>
      </div>
    </header>

    <main>
      <section class="page-header">
        <div class="container">
          <h1>Tienda de Kits</h1>
          <p>Descubre nuestros kits de robótica con contenido exclusivo</p>
        </div>
      </section>

      <section class="tienda-content" style="padding-bottom:120px">
        <div class="container">
          <div class="filters">
            <button class="filter-btn active" data-filter="all">Todos</button>
            <button class="filter-btn" data-filter="principiante">Principiante</button>
            <button class="filter-btn" data-filter="intermedio">Intermedio</button>
            <button class="filter-btn" data-filter="avanzado">Avanzado</button>
          </div>
          
          <div class="products-grid" id="productsGrid">
            <!-- Los productos se cargarán dinámicamente -->
          </div>
        </div>
      </section>
    </main>

    <footer class="footer">
      <div class="container foot-grid">
        <div>
          <strong>Croccon</strong>
          <p>Buy One. Plant one.</p>
        </div>
        <div class="right">
          <span>Síguenos</span>
          <div class="dots"></div>
        </div>
      </div>
    </footer>

    <script src="assets/js/data.js"></script>
    <script src="assets/js/app.js"></script>
    <script>
      // Lógica específica de la tienda
      document.addEventListener('DOMContentLoaded', function() {
        const productsGrid = document.getElementById('productsGrid');
        const filterBtns = document.querySelectorAll('.filter-btn');
        
        function renderProducts(products) {
          productsGrid.innerHTML = products.map(product => `
            <div class="product-card" data-category="${product.category || 'principiante'}">
              <img src="${product.img}" alt="${product.name}">
              <div class="product-info">
                <h3>${product.name}</h3>
                <p class="product-desc">Kit completo con materiales y guía digital</p>
                <div class="product-price">$${product.price}</div>
                <div class="product-actions">
                  <button class="btn" onclick="viewProduct('${product.id}')">Ver Detalles</button>
                  <button class="btn btn-outline" onclick="addToCart('${product.id}')">Agregar al Carrito</button>
                </div>
              </div>
            </div>
          `).join('');
        }
        
        function filterProducts(category) {
          const products = window.CROC_DATA.products;
          const filtered = category === 'all' ? products : products.filter(p => (p.category || 'principiante') === category);
          renderProducts(filtered);
        }
        
        // Filtros
        filterBtns.forEach(btn => {
          btn.addEventListener('click', () => {
            filterBtns.forEach(b => b.classList.remove('active'));
            btn.classList.add('active');
            filterProducts(btn.dataset.filter);
          });
        });
        
        // Cargar productos iniciales
        if (window.CROC_DATA) {
          renderProducts(window.CROC_DATA.products);
        }
      });
      
      function viewProduct(productId) {
        window.location.href = `kit.html?id=${productId}`;
      }
      
      function addToCart(productId) {
        const cart = JSON.parse(localStorage.getItem('cart') || '[]');
        const product = window.CROC_DATA.products.find(p => p.id === productId);
        if (product) {
          cart.push({...product, quantity: 1});
          localStorage.setItem('cart', JSON.stringify(cart));
          alert('Producto agregado al carrito');
        }
      }
    </script>
  </body>
</html>
